---
title: 'How to deal with token-related error codes?'
sidebar_position: 649
platforms: []
products: []
---

export const toc = [{}];

When a primary/secondary certificate is enabled in your project and joining via app ID only is not allowed, you use dynamic tokens to authenticate users. This page lists token-related error codes and event callbacks you may receive, provides triggering causes and solutions, and helps you troubleshoot.

## 101: App ID invalid

**Problem**

The SDK for native platforms returns the `ERR_INVALID_APP_ID(101)` error code when initializing the Agora service. Alternatively, the SDK calls back the `onError` event and returns the `ERR_INVALID_APP_ID(101)` error code when calling `joinChannel`.

**Cause**

An invalid app ID usually caused by the incorrect data type.

**Solution**

Check that the app ID data type is string and reinitialize the service.

## 109: Token expired

**Problem**

The SDK for native platforms calls back the `onError` event and returns the `ERR_TOKEN_EXPIRED(109)` error code when calling `joinChannel`.

**Cause**

The token has expired.

**Solution**

Once the token has expired, regenerate it on the server and call `renewToken` to rejoin the channel.

## 110: Token invalid

**Problem**

The SDK for native platforms calls back the `onError` event and returns the `ERR_INVALID_TOKEN(110)` error code when calling `joinChannel`.

**Cause**

The generated token is invalid. Usually this happens for one of the following reasons:

- Primary/secondary certificate **is enabled** in your project, but the token is **not passed** when joining the channel. Alternatively, primary/secondary certificate **is not** enabled, but the token **is passed** to join the channel.
- The app ID, user ID, and channel name you filled in when generating the token on the server do not match the app ID, user ID, and channel name you filled in when initializing and joining the channel.

**Solution**

Before joining the channel, check whether the project corresponding to the app ID you filled in during initialization has a primary/secondary certificate enabled.
- If primary/secondary certificate is not enabled, you cannot use the token to join the channel.
- If primary/secondary certificate is enabled in the project and app ID-only joining is allowed, you can join the channel using only the app ID or using the token generated by the primary/secondary certificate to join the channel.
- If primary/secondary certificate is enabled in your project and app ID-only joining is not allowed, you must use a token to join the channel.

When confirming the use of a token to join the channel, also confirm the following:
- The app ID used to generate the token is consistent with the app ID filled in when initializing the service.
- The user ID used to generate the token is consistent with the user ID filled in when joining the channel, and the data type is also consistent.
- The channel name used to generate the token is consistent with the channel name filled in when joining the channel.

## Token expiration event callback

To improve communication experience, Agora provides the following two callbacks to remind users that their token is about to expire or has expired:

- `onTokenPrivilegeWillExpire`: This callback indicates that the token will expire within 30 seconds. If you have received this callback, regenerate the token on the server side and call `renewToken` to pass the newly generated token to the SDK.
- `onRequestToken`: This callback indicates that the token has expired. If you have received this callback, regenerate the token on the server side and call `joinChannel` to join the channel again.

## Error code comparison

The table below provides the error code equivalents for different languages.

| Error code | Java/C++/C# | Objective-C |
|---|---|---|
| 101 | `ERR_INVALID_APP_ID` | `AgoraErrorCodeInvalidAppId` |
| 109 | `ERR_TOKEN_EXPIRED` | `AgoraErrorCodeTokenExpired` |
| 110 | `ERR_INVALID_TOKEN` | `AgoraErrorCodeInvalidToken` |

