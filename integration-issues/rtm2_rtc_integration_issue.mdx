---
title: 'How do I handle issues when integrating the Signaling SDK and Video SDK simultaneously?'
sidebar_position: 664
platforms: []
products: []
---

import CodeBlock from '@theme/CodeBlock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

export const toc = [{}];

When integrating Signaling SDK version 2.2.0 and above with Video SDK version 4.3.0 and above, the following errors may appear in the IDE:

- **Android:**
    ```java
    com.android.builder.merge.DuplicateRelativeFileException: More than one file was found with OS independent path 'lib/x86/libaosl.so'
    ```

- **iOS:**

    ```objc
    Unexpected duplicate tasks
    Multiple commands produce <your_app_build_path>/Contents/Frameworks/aosl.framework/Versions/A'
    ```

    ```bash
    The 'XXX' target has frameworks with conflicting names: aosl.xcframework.
    ```

## Why this happens

Both Signaling SDK versions 2.2.0 and above and Video SDK versions 4.5.0 and above use the same library:

  - **Android**: `libaosl.so`

  - **iOS/macOS**: `aosl.xcframework`

  - **Windows**: `libaosl.dll`

As a result, the IDE detects multiple files with the same path during the build process, leading to errors.

## Solution

Follow these steps to resolve the issue:

### Manually specify the `aosl` library version

Compare the `aosl` library versions included in both the Signaling and Video SDKs, and keep the version with the higher number.

You can find version information in the following release notes:

* [<Vg k="VSDK"/> release notes](/realtime-communication/overview/release-notes)
* [<Vg k="SIG"/> release notes](/signaling/overview/release-notes)

### Remove older version files

After identifying the latest version:

1. Delete the older version of the `aosl` library from your SDK package.
2. Ensure the newer version is correctly linked in your build configuration.
3. Rebuild the project.

Depending on your integration method, choose from the following solutions:

<Tabs>
  <TabItem value="video-sdk" label="Video SDK">

  If the version of the `aosl` library included in the <Vg k="VSDK"/> package is lower than the version required by your project, delete the outdated library file based on the target platform:

  * **Android**: Delete the older-version `libaosl.so` file from the SDK package.
  * **iOS/macOS**: Delete the older-version `aosl.xcframework` file from the SDK package.
  * **Windows**: Delete the older-version `libaosl.dll` file from the SDK package.
  </TabItem>
  <TabItem value="sig-sdk" label="Signaling SDK">
  
  If the version of the `aosl` library in the Signaling SDK package is lower, resolve the conflict using one of the following methods:

  ### Upgrade to Signaling SDK v2.2.2 or higher

    If you are using a Signaling SDK version earlier than 2.2.2, Agora recommends upgrading to v2.2.2 or later. Starting from this version, the Signaling SDK supports:

    * **iOS**: Subspecs for CocoaPods
    * **Android**: Lightweight Maven repositories

    These improvements allow better compatibility with <Vg k="VSDK"/> v4.5.0 and above, and help prevent library conflicts.

    * **Android** (Java)

      <CodeBlock language="groovy" showLineNumbers>
      {`dependencies {
        // If you are using Signaling SDK v2.2.2 or later with Video SDK v4.5.0 or later,
        // replace x.y.z with the specific version number (for example, 2.2.2).
        implementation 'io.agora:agora-rtm-lite:x.y.z'
      }`}
      </CodeBlock>

    * **iOS** (Objective-C)

        <CodeBlock language="ruby" showLineNumbers>
        {`platform :ios, '11.0'
        target 'YourApp' do
        # If you are using Signaling SDK v2.2.2 or later with Video SDK v4.5.0 or later,
        # replace x.y.z with the specific version number (e.g., 2.2.2).
        pod 'AgoraRtm', 'x.y.z', :subspecs => ['RtmKit']
      end`}
        </CodeBlock>

    After upgrading, clean and rebuild your project to apply the changes.

### Manually delete duplicate libraries

If you do not want to upgrade to version 2.2.2 or higher, manually remove duplicate library files from the Signaling SDK package.

  * **Android** 

    Depending on your integration method (CDN or Maven), manually delete the following files from the Signaling SDK package:

    <Tabs>
      <TabItem value="Android-cdn" label="CDN">
        1. Manually delete the following files:
           - `lib/x86/libaosl.so`
           - `lib/x86_64/libaosl.so`
           - `lib/armeabi-v7a/libaosl.so`
           - `lib/arm64-v8a/libaosl.so`

        1. Rebuild the project.
      </TabItem>

      <TabItem value="Android-maven" label="Maven">
        1. Add the `packagingOptions` block to your `build.gradle` file as shown below:
            <CodeBlock language="yaml" showLineNumbers>
            {`android {
             // ...
             packagingOptions {
               pickFirst 'lib/x86/libaosl.so'
               pickFirst 'lib/x86_64/libaosl.so'
               pickFirst 'lib/armeabi-v7a/libaosl.so'
               pickFirst 'lib/arm64-v8a/libaosl.so'
             }  
           }`}
            </CodeBlock>
        1. Rebuild the project to apply the changes.
      </TabItem>
    </Tabs>

  * **iOS SDK** (Objective-C)

    Depending on your integration method, choose one of the following approaches:

    <Tabs>
      <TabItem value="ios-cdn" label="CDN">
        1. Manually delete the `libs/aosl.xcframework` file from the Signaling SDK package.
        1. Rebuild the project.
      </TabItem>

      <TabItem value="ios-cocoapods" label="CocoaPods">
        1. Add the following `pre_install` script to the end of your `Podfile`. This script automatically deletes the `aosl.xcframework` from the Agora Signaling Pod during installation.
            <CodeBlock language="ruby" showLineNumbers>
            {`pre_install do |installer|
             
             # Define the path to the AgoraRtm Pod
             rtm_pod_path = File.join(installer.sandbox.root, 'AgoraRtm')
             
             # Define the full path to aosl.xcframework
             aosl_xcframework_path = File.join(rtm_pod_path, 'aosl.xcframework')
             
             # Delete the framework if it exists
             if File.exist?(aosl_xcframework_path)
               puts "Deleting aosl.xcframework from #{aosl_xcframework_path}"
               FileUtils.rm_rf(aosl_xcframework_path)
             else
               puts "aosl.xcframework not found, skipping deletion."
             end
           end`}
            </CodeBlock>
          2. Run `pod install` to reintegrate the SDKs.
          3. Rebuild the project.
      </TabItem>
    </Tabs>

  * **Flutter SDK**
    
    Depending on your target platform, follow the appropriate steps below:

    <Tabs>
     <TabItem value="android" label="Android">
    
      1. Add the `aosl` dependency

          In your projectâ€™s root `build.gradle` file, add the following dependency:

            <CodeBlock language="bash" showLineNumbers>
            {`dependencies {
            api 'io.agora.infra:aosl:1.2.13'
            // Other dependencies...
         }`}
            </CodeBlock>

      2. Resolve duplicate `.so` files

          If you are integrating using **Maven**, configure the build to prioritize the first matching native library by adding the `packagingOptions` block to your module-level `build.gradle` file:

            <CodeBlock language="yaml" showLineNumbers>
            {`android {
             // ...
             packagingOptions {
               pickFirst 'lib/x86/libaosl.so'
               pickFirst 'lib/x86_64/libaosl.so'
               pickFirst 'lib/armeabi-v7a/libaosl.so'
               pickFirst 'lib/arm64-v8a/libaosl.so'
             }  
           }`}
            </CodeBlock>

      3. Rebuild the project

          After synchronization is complete, clean and rebuild.
     </TabItem>
     <TabItem value="ios" label="iOS">

      1. When integrating using Cocoapods,, add the following `pre_install` script at the **end** of your `Podfile`:

          <CodeBlock language="bash" showLineNumbers>
          {`pre_install do |installer|
            # Define the path to the AgoraRtm framework
            rtm_pod_path = File.join(installer.sandbox.root, 'AgoraRtm')

            # Full path to aosl.xcframework
            aosl_xcframework_path = File.join(rtm_pod_path, 'aosl.xcframework')

            # Delete the framework if it exists
            if File.exist?(aosl_xcframework_path)
              puts "Deleting aosl.xcframework from #{aosl_xcframework_path}"
              FileUtils.rm_rf(aosl_xcframework_path)
            else
              puts "aosl.xcframework not found, skipping deletion."
            end
          end`}
          </CodeBlock>

      2. Run `pod install` to reintegrate the SDKs.

      3. Rebuild the project.
     </TabItem>
    </Tabs>

  </TabItem>
</Tabs>

























